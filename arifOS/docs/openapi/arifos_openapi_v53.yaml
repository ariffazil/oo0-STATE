openapi: 3.1.0
info:
  title: arifOS Unified API
  version: v53.1.0-CODEBASE
  description: |
    Constitutional AI Governance Layer (Hybrid Architecture).
    Enforces Physics (Reasoning), Math (Measurement), and Language (Action).
servers:
  - url: https://arifos.arif-fazil.com
    description: Production (Railway)
  - url: http://localhost:8000
    description: Local Development (Codebase SSE)

paths:
  /sse:
    get:
      summary: MCP SSE Transport
      description: Connect MCP clients (Claude/Cursor) via Server-Sent Events.
      responses:
        '200':
          description: SSE Stream Established

  /messages:
    post:
      summary: MCP Message Protocol
      description: Send JSON-RPC 2.0 messages to the server.

  /health:
    get:
      summary: System Health
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status: {type: string}
                  mode: {type: string, example: "CODEBASE"}
                  version: {type: string, example: "v53.1.0-CODEBASE"}

components:
  schemas:
    ActionTriad:
      type: string
      enum: [physics, math, language, predict, measure, harmonize, redeem]
      description: |
        Standardized Trinity Capabilities:
        - Physics: Reasoning & Modelling
        - Math: Measurement & Scoring
        - Language: Action & Verdicts
