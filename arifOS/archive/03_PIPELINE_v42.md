# Pipeline (v42)

**Version:** v42.0 | **Status:** DRAFT | **Last Updated:** 2025-12-16
**Source:** Merged from v38Omega Pipeline

---

## 1. Philosophy

The 000-999 pipeline is a **constitutional metabolism**, not a workflow.

Each stage carries:
- **Mathematical invariant** - what must hold
- **Physical law** - thermodynamic constraint
- **Behavioral rule** - what the stage does

The pipeline ensures cognition remains **lawful, corrigible, and peaceful**.

---

## 2. The 10 Stages

| Stage | Name | Purpose | Class A | Class B |
|-------|------|---------|---------|---------|
| 000 | RESET | Initialize + Amanah gate | Yes | Yes |
| 111 | SENSE | Parse input, classify stakes | Yes | Yes |
| 222 | REFLECT | Retrieve context + scars | No | Yes |
| 333 | REASON | Generate draft response | Yes | Yes |
| 444 | ALIGN | Fact-check heuristics | No | Yes |
| 555 | EMPATHIZE | Blame language detection | No | Yes |
| 666 | BRIDGE | Physical action detection | No | Yes |
| 777 | FORGE | Empathic refinement | No | Yes |
| 888 | JUDGE | APEX verdict | Yes | Yes |
| 999 | SEAL | Final output | Yes | Yes |

---

## 3. Stage Definitions

### Stage 000: RESET (VOID)

**Purpose:** Reset state + initialize; run Amanah risk gate

**Physics:**
- Delta S uninitialized => no generation allowed
- Omega_dyn widens to maximum (full humility)
- Peace^2 = 1.0 (baseline neutrality)

**Behavior:**
- Initialize MemoryContext
- Run Amanah risk checkpoint
- If Amanah score < 0.5: early VOID verdict

### Stage 111: SENSE

**Purpose:** Parse input, classify stakes (Class A/B)

**Physics:**
- d(Delta S)/dt = 0 (no entropy change yet)
- Omega_dyn => Omega_0 (3-5% humility)
- Raw perception only

**Behavior:**
- Detect high-stakes keywords
- If high-stakes => CLASS_B

### Stage 222: REFLECT

**Purpose:** Retrieve context + prior scars

**Physics:**
- Delta S_222 = KL(p_input || p_prior)
- Early contradiction detection

**Behavior:**
- Retrieve scars and context
- If scars found => escalate to Class B

### Stage 333: REASON

**Purpose:** Build reasoning prompt and get draft response

**Physics:**
- d(Delta S)/dt > 0 (entropy cooling)
- 0.15 <= Delta C <= 0.40
- Peace^2 must remain >= 1

**Behavior:**
- Build prompt with query + context + scars
- Generate draft via LLM
- AGI (Delta) takes over

### Stage 444: ALIGN

**Purpose:** Lightweight fact-error heuristics

**Physics:**
- Delta S_new >= Delta S_old
- Sync internal with external truth

### Stage 555: EMPATHIZE

**Purpose:** Blame language detection

**Physics:**
- Peace^2 >= 1.0
- kappa_r >= 0.95
- Tone reduces heat; protects weakest listener

**Behavior:**
- Scan for blame patterns
- ASI (Omega) takes over

### Stage 666: BRIDGE

**Purpose:** Physical action heuristic

**Physics:**
- psi_i => psi_e (internal aligns with external)
- Tri-Witness >= 0.95

### Stage 777: FORGE

**Purpose:** Optional empathic refinement for Class B

**Physics:**
- Sharp Delta S spike (insight)
- Peace^2 must NOT collapse

### Stage 888: JUDGE

**Purpose:** Compute metrics, apply floors, run @EYE, decide verdict

**Physics:**
- State in Delta intersection Omega intersection Psi
- Enforce all constitutional floors

**Steps:**
1. Compute floor metrics
2. Run @EYE sentinel
3. Apply APEX floors
4. W@W Federation evaluation
5. Merge verdicts
6. Write to memory

### Stage 999: SEAL

**Purpose:** Finalize output based on verdict

**Behavior:**
- SEAL => emit response as-is
- PARTIAL => emit with hedge note
- 888_HOLD => emit hold message
- SABAR => emit SABAR message
- VOID => emit refusal message

---

## 4. Class A vs Class B Routing

### Class A (Low-Stakes, Fast Path)

**Stages:** 000 => 111 => 333 => 888 => 999

**Conditions:**
- No high-stakes keywords
- No force_class override
- Fast (< 1 second)

### Class B (High-Stakes, Deep Path)

**Stages:** 000 => 111 => 222 => 333 => 444 => 555 => 666 => 777 => 888 => 999

**Conditions:**
- High-stakes keywords detected
- force_class == CLASS_B
- Active scars found
- Slower (may trigger Phoenix-72)

---

## 5. Memory Integration

### Verdict => Band Routing

| Verdict | Target Bands | Canonical |
|---------|--------------|-----------|
| SEAL | LEDGER + ACTIVE | Yes |
| SABAR | LEDGER + ACTIVE | Yes (with reason) |
| PARTIAL | PHOENIX + LEDGER | Pending review |
| VOID | VOID only | No (NEVER canonical) |
| 888_HOLD | LEDGER | Awaiting human |
| SUNSET | PHOENIX | Re-trial required |

---

## 6. Meta-Truth of the Metabolism

### Inhale: 000 => 111 => 222
(reset => sense => reflect)

### Circulate: 333 => 444 => 555 => 666 => 777
(reason => align => empathize => bridge => forge)

### Exhale: 888 => 999
(judge => seal)

Governed by:
- **Delta (Mind / Clarity)** - AGI
- **Omega (Heart / Humility)** - ASI
- **Psi (Soul / Stability)** - APEX

---

**DITEMPA BUKAN DIBERI** - Forged, not given; truth must cool before it rules.
